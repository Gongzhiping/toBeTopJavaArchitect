## 文章目录
- [前言](#前言)
- [一、网络层次划分](#网络层次划分)
    - [1.1 应用层](#应用层)  
    - [1.2 传输层](#传输层)  
    - [1.3 网络层](#网络层)  
    - [1.4 链路层](#链路层)  
    - [1.5 物理层](#物理层)  
- [二、封装](#封装)

### 前言
计算机网络学习的核心内容就是网络协议的学习。网络协议是为计算机网络中进行数据交换而建立的规则、
标准或者说是约定的集合。计算机网络协议同我们的语言一样，多种多样。

为了给网络协议的设计提供一个结构，网络设计者以分层的方式组织协议。

一个协议层能够用软件、硬件或者两者的结合来实现。比如HTTP和SMTP这样的应用层协议几乎总是在端系统中用软件实现的，
传输层协议也是如此。因为物理层和数据链路层负责处理跨越特定链路的通信，它们通常是实现在与给定的链路相联系的网络接口卡
（比如以网络或WIFI接口卡）中。网络层通常是硬件和软件实现的混合体。

### 网络层次划分
将所有的协议综合起来，各个层次的所有协议被称为协议栈。
因特网的协议栈由5个层次组成：物理层、链路层、网络层、传输层和应用层。
这个划分方法称为TCP/IP五层协议。
除此之外，还有OSI七层模型和TCP/IP四层协议。它们之间的对应关系如下：

![层次划分](https://img-blog.csdn.net/20161116144744393)

当然比较常用的是TCP/IP五层协议。

#### 应用层
应用层是网络应用程序以及它们的应用层协议存留的地方。因特网应用层包括许多协议，
例如HTTP（Web应用的主要协议）、SMTP（邮件传输）和FTP（文件传送）等。再比如我们每天都在使用的DNS域名系统。

应用层协议分布在多个端系统上，一个端系统中的应用程序使用协议与另外一个端系统中的应用程序交换信息的分组。
我们把位于应用层的信息分组称为报文。

#### 传输层
因特网的传输层在应用程序端点之间传送应用层报文。在因特网中，有TCP和UDP两个传输层协议。

TCP向它的应用程序提供了面向连接的服务，这种服务包括了应用层报文向目的地的确保传递和流量控制。
TCP也将长报文划分成短报文，并提供拥塞控制机制，因此，当网络拥塞时，发送方可以抑制其传输速率。

UDP协议向它的应用程序提供无连接服务。这是一种不提供不必要服务的服务，没有可靠性，没有流量控制，也没有拥塞控制。

我们把传输层分组称为报文段。

#### 网络层
因特网的网络层负责将称为数据报的网络层分组从一台主机移动到另一台主机。在一台源主机中的因特网传输层协议(TCP或者UDP)向网络层递交传输层报文段和目的地址。

网络层包括著名的IP协议，该协议定义了在数据报中的各个字段以及端系统和路由器如果作用于这些字段。网络层也包括决定路由的路由选择协议，它使得数据报根据该路由从源传输到目的地。

#### 链路层
网络层通过源和目的地之间的一系列路由器路由数据报，为了将分组从一个结点移动到路径的下一个结点，网络层必须依靠链路层的服务。特别是在每个结点，网络层将数据报下传给链路层，链路层沿着路径将数据报传递给下一个结点，在下一个结点，链路层将数据报上传给网络层。

由链路层提供的服务取决于应用于该链路的特定的链路层协议，比如我们常见的以太网，WIFI等。

因为数据报从源到目的地传送通常要经过几条链路，一个数据报可能被沿途不同链路上的不同链路层协议处理。例如，一个数据报可能被一段链路上的以太网和下一段链路上的PPP所处理。网络层将受到来自每个不同链路的链路层协议的服务。

我们把链路层分组称为帧。

#### 物理层
链路层的任务是将整个帧从一个网络元素移动到邻近的网络元素，而物理层的任务是将该帧中的一个一个比特从一个结点移动到下一个结点。物理层的协议是和链路相关的，并且进一步与该链路的实际传输媒体相关。比如，以太网具有许多物理层协议：一个是关于双绞铜线的，另一个是关于同轴电缆的，还有是关于光纤的等等。

### 封装
![封装](https://img-blog.csdn.net/20161116144814878)

上图显示了这样一条物理路径：数据从发送端系统的协议栈向下，经过链路层交换机和路由器的协议栈，进而向上到达接收端系统的协议栈。

我们需要知道的是，路由器和链路层交换机都是分组交换机，它们不实现协议栈中的所有层次，
链路层交换机实现了第一层和第二层；路由器实现了第一层到第三层。这意味着，路由器能够实现IP协议（即第三层协议），
而链路层交换机则不能，于是链路层交换机不能识别IP地址，但是能够识别第二层地址，比如MAC地址。

但是，因特网中的所有主机都实现了所有5个层次的协议。

上图的过程也说明了一个重要的概念：**封装。**

在发送主机端，一个应用层报文被传送给传输层。传输层收到报文之后，在报文上附上附加信息，即所谓的传输层首部信息
，该首部信息将被接收端的传输层使用。应用层报文和传输层首部信息一起构成了传输层报文段，传输层报文段因此封装了应用层报文。

传输层则向网络层传递该报文段，网络层增加了网络层首部信息，比如源和目的端系统的地址等，由此产生了网络层数据报。

该数据报接下来被传递给链路层，链路层增加它自己的链路层首部信息，创建了链路层帧。

所以，我们看到在每一层，一个分组都具有两种类型的字段：首部字段和有效载荷字段。而有效载荷即来自于上一层的分组。

**其实说白了，发送端就是对应用层数据一层一层加头的过程，到接收端后，
接收端再一层一层去掉头部信息，然后交给对应的应用程序**
